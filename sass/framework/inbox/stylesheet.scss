@import "compass/css3"; // compass css3 helpers
@import "../../../../../vendors/hypejunction/sass/_variables/variables";
@import "variables";

$prefix: 'inbox';

[class~=#{$prefix}] {
	@include box-sizing(border-box);
}

.elgg-list {
	& > .elgg-item-object-messages {
		padding: 0;
	}
}

.#{$prefix}-message {
	z-index: 1;
	padding: 5px;
	position: relative;
	&[data-href] {
		cursor: pointer;
	}
	.elgg-content, p {
		margin: 0;
		font-size: 14px;
		line-height: normal;
	}
	h3 {
		font-size: 14px;
		line-height: normal;
		margin: 0;
	}
	&.#{$prefix}-message-unread {
		background-color: $lighter-bg-color;
		.elgg-menu-item-markunread {
			display: none;
		}
	}
	&.#{$prefix}-message-read {
		background-color: #ffffff;
		.elgg-menu-item-unread,
		.elgg-menu-item-markread {
			display: none;
		}
	}
	&.#{$prefix}-message-form-row {
		[type="checkbox"] {
			float: left;
			margin: 5px;
		}
		.#{$prefix}-message-image-block {
			margin-left: 20px;
		}
	}
	&.#{$prefix}-message-threaded {
		.elgg-content {
			.#{$prefix}-message-subject + .#{$prefix}-message-body-excerpt:before {
				content: " - ";
				display: inline;
			}
		}
	}
	.elgg-module-embed {
		margin: 5px 0;
	}
}
.#{$prefix}-message-image-block {
	position: relative;
	@include box-sizing(border-box);
	& > .elgg-image {
		float: none;
		position: absolute;
		top: 0;
		left: 0;
		margin: 0 5px;
	}
	& > .elgg-body {
		position: relative;
		padding-left: 55px;
		width: 100%;
	}
}
.#{$prefix}-menu {
	& > li {
		.#{$prefix}-message-count-indicator,
		.#{$prefix}-message-unread-indicator {
			&, &:hover {
				color: white;
				background: $border-color;
				@include border-radius(1000px);
				padding: 2px 4px;
				font-size: 11px;
				font-weight: bold;
				line-height: 16px;
				height: 20px;
				min-width: 20px;
				text-align: center;
			}
		}
		.#{$prefix}-message-unread-indicator {
			&, &:hover {
				background: $primary-color;
			}
		}
	}
}

.#{$prefix}-messages-control-group {
	display: inline-block;
	padding: 4px;
	margin: 0 0 5px 0;
}
.elgg-menu-inbox, .elgg-menu-inbox-thread {
	margin: 0 10px 0 0;
	display: inline-block;
	& > li {
		display: inline-block;
		position: relative;
		& > a {
			padding: 5px 10px;
			background: $lighter-bg-color;
			border: 1px solid $border-color;
			color: #222;
			border-left: 0;
			span {
				color: #222;
			}
		}
		&:first-child {
			& > a {
				border-left: 1px solid $border-color;
			}
		}
		.elgg-child-menu {
			display: none;
			position: absolute;
			right: 0;
			margin: 2px -1px;
			border: 1px solid $border-color;
			@include box-shadow(2px 2px 3px $border-color);
			background: #fff;
			z-index: 2;
			width: 150px;
			& > li {
				border-bottom: 1px solid $border-color;
				&:last-child {
					border-bottom: none;
				}
				& > a {
					display: block;
					width: 100%;
					padding: 5px 10px;
					background: #fff;
					&:hover {
						background: $lighter-bg-color;
					}
				}
			}
		}
		&:hover, &.elgg-state-active {
			.elgg-child-menu {
				display: block;
			}
		}
	}
}

[class^="inbox-icon-"] {
	font-size: 20px;
	width: 25px;
	height: 25px;
	line-height: 25px;
	text-align: center;
	vertical-align: middle;
	& + span {
		margin-left: 8px;
	}
}
.#{$prefix}-icon-trash {
	@include icon($fa-var-trash);
}
.#{$prefix}-icon-send {
	@include icon($fa-var-paper-plane-o);
}
.#{$prefix}-icon-markread {
	@include icon($fa-var-eye);
}
.#{$prefix}-icon-markunread {
	@include icon($fa-var-eye-slash);
}
.#{$prefix}-icon-attachment {
	@include icon($fa-var-paperclip);
}
.#{$prefix}-icon-reply {
	@include icon($fa-var-reply-all);
}
.#{$prefix}-hidden {
	display: none !important;
}

.ui-dialog.#{$prefix}-dialog-window {
	@include modal;
}

.elgg-form-messages-inbox {
	input, textarea, select {
		margin-bottom: 0;
	}
}
.#{$prefix}-form-row {
	margin-bottom: 15px;
}

.#{$prefix}-message-image-attachments {
	@include clearfix;
	& > div {
		@media #{$medium} {
			float: left;
			width: 33.33333%;
			padding: 5px;
			margin: 0;
			&:nth-of-type(1n) {clear: none;}
			&:nth-of-type(3n+1) { clear:both; }
		}
	}
}
.#{$prefix}-message-attachments {
	display: table;
	width: 100%;
	margin: 5px 0;
	border-top: 1px solid $border-color;
	border-bottom: 1px solid $border-color;
	& > div {
		padding: 3px;
		& > div {
			padding: 2px;
			font-size: 90%;
		}
		img, img:hover {
			border: none;
			padding: 0;
			margin: 0;
			max-width: 25px;
			box-shadow: none;
		}
		&:nth-child(even) {
			background: #f4f4f4;
		}
	}
}

.#{$prefix}-footer-controls {
	& > li {
		display: inline-block;
		&:after {
			content: "|";
			color: $border-color;
			display: inline-block;
			padding: 0 5px;
		}
		&:last-child:after {
			display: none;
		}
	}
}